webpackJsonp([20],{1065:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=a(0),o=a.n(i),l=a(382),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,[{key:"changePage",value:function(e){this.props.changePage&&this.props.changePage(e)}},{key:"render",value:function(){var e=Object.assign({},this.props,{pagination:!1}),t=Object.assign({},{marginTop:20,textAlign:"right"},this.props.paginationStyle||{});return o.a.createElement("div",null,o.a.createElement(l.y,e),this.props.pagination&&this.props.total?o.a.createElement(l.q,{style:t,showQuickJumper:!0,defaultCurrent:1,current:this.props.current,defaultPageSize:this.props.defaultPageSize||10,pageSize:this.props.pageSize||10,showTotal:function(e){return"\u5171"+e+"\u6761\u6570\u636e"},total:this.props.total,onChange:this.changePage.bind(this)}):void 0)}}]),t}(i.Component);t.a=u},1257:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),o=a.n(i),l=a(126),c=a(382),u=a(1258),g=a(22),p=a.n(g),d=a(208),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),y=c.i.Item,h=c.h.RangePicker,m={labelCol:{span:10},wrapperCol:{span:14,style:{paddingLeft:"10px"}}},b=function(e){return e&&e<p()().endOf("day")},v="YYYY-MM-DD",E={width:258,height:58,borderRadius:4,border:"1px dashed #d9d9d9",cursor:"pointer",marginTop:-10,lineHeight:"20px",textAlign:"center"},w=function(e){function t(){var e,a,s,i;r(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return a=s=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),s.state={visible:!1,selectedTarget:void 0,editId:void 0,editInfo:void 0,rangePickerValue:[]},s.chooseStudent=function(e){s.setState({selectedTarget:e,visible:!1});var t=e.strategyTargetCollege?e.strategyTargetCollege.split("\u3001"):[];s.props.form.setFieldsValue({strategyId:e.id,strategyTargetCollege:t})},s.saveAction=function(){s.props.form.validateFields(function(e,t){if(!e){var a=t.strategyId,r=t.remark,n=t.strategyDate,i=!0;if(a||(s.props.form.setFields({strategyId:{errors:[new Error("\u8bf7\u9009\u62e9\u5173\u8054\u7684\u9884\u8b66\u7b56\u7565\uff01")]}}),i=!1),n&&0!==n.length||0!==s.state.rangePickerValue.length||(s.props.form.setFields({strategyDate:{errors:[new Error("\u8bf7\u9009\u62e9\u4e0d\u9884\u8b66\u65f6\u95f4\uff01")]}}),i=!1),!i)return;var o=JSON.parse(JSON.stringify(n))||[];s.state.rangePickerValue.length>0&&o.push({startDate:s.state.rangePickerValue[0].format(v),endDate:s.state.rangePickerValue[1].format(v)});var l=o.map(function(e){return e.startDate+"~"+e.endDate}).join(","),u={strategyId:a,strategyTarget:s.state.selectedTarget.strategyTarget,remark:r,strategyDate:l};s.state.editInfo&&(u.id=s.state.editInfo.id),c.E.success("\u4fdd\u5b58\u6210\u529f\uff01",1,function(){s.props.history.push("/mainframe/systemsetup/earlywarningsetting?whitelist")})}})},s.addStrategyDate=function(){var e=s.state.rangePickerValue;if(e&&e.length>0){var t=s.props.form.getFieldValue("strategyDate")||[],a={startDate:e[0].format(v),endDate:e[1].format(v)},r=!1;if(t.forEach(function(e){e.startDate===a.startDate&&e.endDate===a.endDate&&(r=!0)}),r)return void c.E.error("\u6240\u9009\u65e5\u671f\u91cd\u590d\uff01");t.push(a),s.props.form.setFieldsValue({strategyDate:t}),s.setState({rangePickerValue:[]})}else c.E.error("\u8bf7\u9009\u62e9\u65e5\u671f\u8303\u56f4\uff01")},s.changeRangePicker=function(e){s.setState({rangePickerValue:e});var t=s.props.form.getFieldValue("strategyDate")||[];t&&0!==t.length||0!==e.length?s.props.form.validateFields():s.props.form.setFields({strategyDate:{errors:[new Error("\u8bf7\u9009\u62e9\u4e0d\u9884\u8b66\u65f6\u95f4\uff01")]}})},s.deletestrategyDate=function(e,t){var a=s.props.form.getFieldValue("strategyDate")||[],r=a.filter(function(t){return!(t.startDate===e.startDate&&t.endDate===e.endDate)});s.props.form.setFieldsValue({strategyDate:r})},i=a,n(s,i)}return s(t,e),f(t,[{key:"componentWillMount",value:function(){var e=this,t=Object(d.d)();t.id&&this.setState({editId:t.id},function(){var t={id:"519ad5a12dea47a4997da7abf160734b",strategyId:"01816d0dd27f4da9816c7003b7ae3aed",strategyTarget:"40070,40050,40141,40020",strategyDate:"2018-09-13~2018-09-21,2018-09-11~2018-09-12",remark:"handle_remarkhandle_remark",createDate:"2018-09-10",updateDate:"2018-09-10",strategyName:"\u9884\u8b66\u7b56\u7565\u540d\u79f0\u91cd\u590d\u6821\u9a8c",strategyTargetCollege:"\u8ba1\u7b97\u673a\u5de5\u7a0b\u5b66\u9662\u3001\u81ea\u52a8\u5316\u5b66\u9662\u3001\u5916\u56fd\u8bed\u5b66\u9662\u3001\u6750\u6599\u5de5\u7a0b\u5b66\u9662"},a=Object.assign({},t)||{},r={id:a.strategyId,strategyName:a.strategyName,strategyTarget:a.strategyTarget,strategyTargetCollege:a.strategyTargetCollege,strategyDate:a.strategyDate},n=a.strategyDate.split(",").map(function(e){return{startDate:e.split("~")[0],endDate:e.split("~")[1]}}),s=a.strategyTargetCollege?r.strategyTargetCollege.split("\u3001"):[];e.setState({editInfo:a,selectedTarget:r}),e.props.form.setFieldsValue({strategyDate:n,strategyTargetCollege:s})})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.editInfo,r=this.state.selectedTarget,n=this.props.form.getFieldValue("strategyTargetCollege")||[],s=this.props.form.getFieldValue("strategyDate")||[];return o.a.createElement("div",null,o.a.createElement(c.c,{className:"breadcrumb"},o.a.createElement(c.c.Item,null,"\u7efc\u5408\u9884\u8b66"),o.a.createElement(c.c.Item,null,"\u9884\u8b66\u8bbe\u7f6e"),o.a.createElement(c.c.Item,null,"\u9884\u8b66\u767d\u540d\u5355")),o.a.createElement("div",{className:"common-content"},o.a.createElement(c.e,{title:o.a.createElement("div",{className:"common-title"},this.state.editId?"\u7f16\u8f91\u8282\u5047\u65e5\u767d\u540d\u5355\u914d\u7f6e":"\u65b0\u589e\u8282\u5047\u65e5\u767d\u540d\u5355\u914d\u7f6e")},o.a.createElement(y,Object.assign({},m,{style:{paddingTop:10},label:"\u9009\u62e9\u5173\u8054\u7684\u9884\u8b66\u7b56\u7565"}),t("strategyId",{rules:[{message:"\u8bf7\u9009\u62e9\u5173\u8054\u7684\u9884\u8b66\u7b56\u7565\uff01"}],initialValue:a&&a.strategyId})(o.a.createElement(c.u,{type:"flex",align:"middle",justify:"center",style:E,onClick:function(){return e.setState({visible:!0})}},r?o.a.createElement("div",null,r.strategyName):o.a.createElement("div",null,o.a.createElement(c.j,{type:"plus"})," \u9009\u62e9\u5173\u8054\u7684\u9884\u8b66\u7b56\u7565")))),o.a.createElement(y,Object.assign({},m,{label:"\u4e0d\u9884\u8b66\u5b66\u9662"}),t("strategyTargetCollege",{rules:[{type:"array"}]})(o.a.createElement("div",null,n.map(function(e,t){return o.a.createElement(c.A,{style:{height:28,lineHeight:"28px",color:"#4a4a4a"},key:t},e)})))),o.a.createElement(y,Object.assign({},m,{label:"\u9009\u62e9\u4e0d\u9884\u8b66\u65f6\u95f4"}),t("strategyDate",{rules:[{type:"array",message:"\u8bf7\u9009\u62e9\u4e0d\u9884\u8b66\u65f6\u95f4\uff01"}]})(o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(h,{style:{width:398},disabledDate:b,value:this.state.rangePickerValue,onChange:this.changeRangePicker}),o.a.createElement(c.j,{type:"plus-circle-o",style:{marginLeft:10,cursor:"pointer"},onClick:this.addStrategyDate})),o.a.createElement("div",null,s.map(function(t,a){return o.a.createElement("div",{key:a},o.a.createElement(c.A,{style:{height:28,lineHeight:"28px",color:"#4a4a4a"}},t.startDate+"~"+t.endDate,o.a.createElement(c.j,{type:"close",style:{marginLeft:5,color:"rgba(0, 0, 0, 0.45)"},onClick:function(){return e.deletestrategyDate(t,a)}})))}))))),o.a.createElement(y,Object.assign({},m,{label:"\u5907\u6ce8"}),t("remark",{initialValue:a&&a.remark})(o.a.createElement(c.k.TextArea,{style:{width:398,height:138,resize:"none"},maxLength:"50"}))),o.a.createElement(c.u,null,o.a.createElement(c.g,m.labelCol),o.a.createElement(c.g,m.wrapperCol,o.a.createElement(c.d,{size:"large",type:"primary",style:{marginRight:20},onClick:this.saveAction},"\u4fdd \u5b58"),o.a.createElement(c.d,{size:"large",onClick:function(){e.props.history.push("/mainframe/systemsetup/earlywarningsetting?whitelist")}},"\u8fd4 \u56de"))))),this.state.visible?o.a.createElement(u.a,{title:"\u9009\u62e9\u9884\u8b66\u7b56\u7565",visible:this.state.visible,selectedTarget:this.state.selectedTarget,onCancel:function(){return e.setState({visible:!1})},onOk:this.chooseStudent}):null)}}]),t}(i.Component),D=c.i.create()(w);t.default=Object(l.withRouter)(D)},1258:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=a(0),o=a.n(i),l=a(382),c=a(1062),u=a(1065),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),p=[{title:"\u5e8f\u53f7",dataIndex:"index",width:"8%"},{title:"\u9884\u8b66\u7b56\u7565\u540d\u79f0",dataIndex:"strategyName",width:"20%",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"\u9884\u8b66\u7b56\u7565\u5bf9\u8c61",dataIndex:"strategyTargetCollege",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"\u9884\u8b66\u7b56\u7565\u65f6\u95f4",dataIndex:"dateTime",width:"20%",render:function(e,t){return t.startDate+"~"+t.endDate}},{title:"\u72b6\u6001",dataIndex:"status",width:"10%",render:function(e,t){var a=void 0;return a="\u751f\u6548"===e?o.a.createElement(l.b,{status:"processing"}):"\u672a\u751f\u6548"===e?o.a.createElement(l.b,{status:"success"}):o.a.createElement(l.b,{status:"default"}),o.a.createElement("span",null,a,e)}}],d=function(e){function t(){var e,a,s,i;r(this,t);for(var o=arguments.length,c=Array(o),u=0;u<o;u++)c[u]=arguments[u];return a=s=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),s.state={pageNum:1,pageSize:8,total:0,dataLists:[],strategyName:void 0,selectedRowKeys:[],selectedRows:[],visible:!1},s.getData=function(){var e=[{id:"5c93cd02d85c4806a0f01c23175d1fe3",strategyName:"\u9884\u8b66\u914d\u7f6e\u5217\u8868\u6839\u636e\u65f6\u95f4\u964d\u5e8f",strategyTarget:"40060",startDate:"2018-09-19",endDate:"2018-09-21",removeFlag:0,status:"\u672a\u5f00\u59cb",strategyTargetCollege:"\u901a\u4fe1\u5de5\u7a0b\u5b66\u9662"}];s.setState({dataLists:e,total:e.length,visible:!0})},s.onOk=function(){s.state.selectedRows[0]?s.props.onOk(s.state.selectedRows[0]):l.E.warn("\u8bf7\u9009\u62e9\u9884\u8b66\u7b56\u7565\uff01")},s.changePage=function(e){s.setState({pageNum:e},function(){return s.getData()})},s.rowClick=function(e){s.setState({selectedRowKeys:[e.key],selectedRows:[e]})},s.onSelectChange=function(e,t){s.setState({selectedRowKeys:e,selectedRows:t})},i=a,n(s,i)}return s(t,e),g(t,[{key:"componentWillMount",value:function(){this.props.selectedTarget&&this.setState({selectedRowKeys:[this.props.selectedTarget.id],selectedRows:[this.props.selectedTarget]}),this.getData()}},{key:"render",value:function(){var e=this,t=this.state.dataLists||[];t.forEach(function(e,a){t[a].key=e.id,t[a].index=a+1});var a=this.state.selectedRowKeys,r={selectedRowKeys:a,type:"radio",columnWidth:"0px",onChange:this.onSelectChange};return this.state.visible?o.a.createElement(c.a,{title:this.props.title,visible:!0,onCancel:this.props.onCancel,centered:!0,onOk:this.onOk,width:1004},o.a.createElement(l.u,{style:{marginBottom:24}},o.a.createElement(l.g,{span:9},"\u9884\u8b66\u7b56\u7565\u540d\u79f0\uff1a",o.a.createElement(l.k,{style:{width:246},placeholder:"\u8bf7\u8f93\u5165\u9884\u8b66\u7b56\u7565\u540d\u79f0",value:this.state.strategyName,onChange:function(t){return e.setState({strategyName:t.target.value})}})),o.a.createElement(l.g,{span:12},o.a.createElement(l.d,{icon:"search",type:"primary",onClick:this.getData},"\u641c \u7d22"))),o.a.createElement(u.a,{dataSource:t,bordered:!0,rowSelection:r,columns:p,current:this.state.pageNum,pagination:!0,paginationStyle:{textAlign:"right"},size:"small",total:this.state.total,changePage:this.changePage,onRow:function(t,a){return{onClick:function(){return e.rowClick(t,a)}}}})):o.a.createElement("div",null)}}]),t}(i.Component);t.a=d}});
//# sourceMappingURL=20.b07cce40.chunk.js.map