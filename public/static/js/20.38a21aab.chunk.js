(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{641:function(e,t,a){"use strict";a.r(t);a(154);var n=a(155),i=a(6),l=a(7),o=a(9),r=a(8),c=a(10),s=a(25),d=a(0),u=a.n(d),h=(a(158),a(156)),m=(a(165),a(169)),p=(a(200),a(196)),b=(a(163),a(164)),g=(a(187),a(191)),f=a(168),O=g.a.Item,j=p.a.Option,v={labelCol:{span:6},wrapperCol:{span:17,style:{paddingLeft:"10px"}}},C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(l)))).state={roleList:[]},a.sureAction=function(){a.props.form.validateFields(function(e,t){if(!e){var n={sourceCode:"pc",userName:t.userName,name:t.name,sex:t.sex-0,accountCode:t.accountCode,roleId:t.roleId-0};a.props.rowInfo&&(n.id=a.props.rowInfo.id);var i={success:!0};i.success?(b.a.success("\u4fdd\u5b58\u6210\u529f\uff01\uff01\uff01"),a.props.hideModal(),a.props.onOk()):b.a.error(i.obj)}})},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState({roleList:[{roleId:1,roleName:"\u7ba1\u7406\u54584"},{roleId:10,roleName:"\u5b66\u751f"},{roleId:20,roleName:"\u6559\u5e08123"},{roleId:29,roleName:"\u8d85\u7ea7\u7ba1\u7406\u5458"}]})}},{key:"render",value:function(){var e,t=this.props.form.getFieldDecorator,a=this.props.rowInfo;return a&&this.state.roleList.forEach(function(t,n){t.roleName===a.roles&&(e=t.roleId)}),u.a.createElement(f.a,{okText:"\u786e\u5b9a",title:this.props.title,visible:!0,onOk:this.sureAction,onCancel:this.props.hideModal,cancelText:"\u53d6\u6d88"},u.a.createElement(O,Object.assign({},v,{label:"\u8d26\u6237\u540d\u79f0"}),t("userName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u6237\u540d\u79f0"}],initialValue:a&&a.username})(u.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u8d26\u6237\u540d\u79f0"}))),u.a.createElement(O,Object.assign({},v,{label:"\u59d3\u540d"}),t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],initialValue:a&&a.name})(u.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),u.a.createElement(O,Object.assign({},v,{label:"\u6027\u522b"}),t("sex",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6027\u522b"}],initialValue:a&&a.sex})(u.a.createElement(p.a,{placeholder:"\u8bf7\u9009\u62e9\u6027\u522b",style:{width:"100%"}},u.a.createElement(j,{value:1},"\u7537"),u.a.createElement(j,{value:2},"\u5973")))),u.a.createElement(O,Object.assign({},v,{label:"\u5b66\u53f7/\u6559\u5de5\u53f7"}),t("accountCode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b66\u53f7/\u6559\u5de5\u53f7"}],initialValue:a&&a.accountCode})(u.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u5b66\u53f7/\u6559\u5de5\u53f7"}))),u.a.createElement(O,Object.assign({},v,{label:"\u7528\u6237\u89d2\u8272"}),t("roleId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u89d2\u8272"}],initialValue:e})(u.a.createElement(p.a,{placeholder:"\u8bf7\u9009\u62e9\u7528\u6237\u89d2\u8272",style:{width:"100%",marginBottom:8},onChange:this.roleIdChange},this.state.roleList.length>0?this.state.roleList.map(function(e){return u.a.createElement(j,{value:e.roleId,key:e.roleId},e.roleName)}):null))))}}]),t}(d.Component),E=g.a.create()(C),y=p.a.Option,k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).state={account:"",name:"",code:"",role:"",roleList:[],addModalShow:!1},a.accountChange=a.accountChange.bind(Object(s.a)(Object(s.a)(a))),a.nameChange=a.nameChange.bind(Object(s.a)(Object(s.a)(a))),a.codeChange=a.codeChange.bind(Object(s.a)(Object(s.a)(a))),a.roleChange=a.roleChange.bind(Object(s.a)(Object(s.a)(a))),a.handleSearch=a.handleSearch.bind(Object(s.a)(Object(s.a)(a))),a.showAddModal=a.showAddModal.bind(Object(s.a)(Object(s.a)(a))),a.hideAddModal=a.hideAddModal.bind(Object(s.a)(Object(s.a)(a))),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"accountChange",value:function(e){this.setState({account:e.target.value})}},{key:"nameChange",value:function(e){this.setState({name:e.target.value})}},{key:"codeChange",value:function(e){this.setState({code:e.target.value})}},{key:"roleChange",value:function(e){this.setState({role:e})}},{key:"handleSearch",value:function(){var e={username:this.state.account,name:this.state.name,accountCode:this.state.code,roleId:this.state.role};this.props.changeFilter(e)}},{key:"showAddModal",value:function(){this.setState({addModalShow:!0})}},{key:"hideAddModal",value:function(){this.setState({addModalShow:!1})}},{key:"componentDidMount",value:function(){var e={success:!0,msg:"\u6210\u529f",obj:[{id:1,roleName:"\u7ba1\u7406\u54584",remark:"\u7ba1\u7406\u5458",createTime:1516431152e3,updateTime:15360454e5},{id:10,roleName:"\u5b66\u751f",remark:"",createTime:1519810586e3,updateTime:1519811232e3},{id:20,roleName:"\u6559\u5e08123",remark:"\u6559\u5e081",createTime:1524736133e3,updateTime:1524736319e3},{id:29,roleName:"\u8d85\u7ea7\u7ba1\u7406\u5458",remark:"\u62e5\u6709\u6743\u9650\u7ba1\u7406\u6a21\u5757\u7684\u8bbe\u7f6e\u6743\u9650\u4e0d\u5305\u542b\u83dc\u5355",createTime:1536549032e3,updateTime:1536550539e3}]};if(e.success){var t=[];e.obj.forEach(function(e){t.push({label:e.roleName,value:e.id})}),t.unshift({label:"\u5168\u90e8",value:""}),this.setState({roleList:t})}}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,"\u8d26\u6237"),u.a.createElement(m.a,{value:this.state.account,onChange:this.accountChange,placeholder:"\u8bf7\u8f93\u5165\u8d26\u6237\u540d\u79f0",style:{width:130,display:"inline-block",marginLeft:10,marginRight:10}}),u.a.createElement("span",null,"\u59d3\u540d"),u.a.createElement(m.a,{value:this.state.name,onChange:this.nameChange,placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",style:{width:130,display:"inline-block",marginLeft:10,marginRight:10}}),u.a.createElement("span",null,"\u5b66\u53f7/\u6559\u5de5\u53f7"),u.a.createElement(m.a,{value:this.state.code,onChange:this.codeChange,placeholder:"\u8bf7\u8f93\u5165\u5b66\u53f7/\u6559\u5de5\u53f7",style:{width:150,display:"inline-block",marginLeft:10,marginRight:10}}),u.a.createElement("span",{style:{marginRight:10}},"\u8d26\u6237\u89d2\u8272"),u.a.createElement(p.a,{placeholder:"\u8bf7\u9009\u62e9\u8d26\u6237\u89d2\u8272",style:{width:150},onChange:this.roleChange},this.state.roleList.length>0?this.state.roleList.map(function(e){return u.a.createElement(y,{value:e.value,key:e.value},e.label)}):null),u.a.createElement(h.a,{type:"primary",onClick:this.handleSearch,style:{margin:"0px 10px"}},"\u641c\u7d22"),u.a.createElement(h.a,{type:"primary",icon:"plus",onClick:this.showAddModal},"\u521b\u5efa\u65b0\u7528\u6237"),this.state.addModalShow?u.a.createElement(E,{title:"\u65b0\u589e\u7528\u6237",onOk:this.handleSearch,hideModal:this.hideAddModal}):null)}}]),t}(u.a.Component),w=(a(185),a(183)),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).state={columns:[{title:"\u5e8f\u53f7",dataIndex:"sortIndex",width:"6%"},{title:"\u8d26\u6237\u540d",dataIndex:"username",width:"10%",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u6027\u522b",dataIndex:"sex",render:function(e){return 1===e?u.a.createElement("span",null,"\u7537"):2===e?u.a.createElement("span",null,"\u5973"):u.a.createElement("span",null,"-")}},{title:"\u5b66\u5de5/\u6559\u5de5\u53f7",dataIndex:"accountCode"},{title:"\u89d2\u8272",dataIndex:"roles"},{title:"\u64cd\u4f5c",dataIndex:"menus",width:"25%",render:function(e,t){return u.a.createElement("span",{style:{color:"#1890ff"}},u.a.createElement("span",{onClick:function(){a.showEdit(t)},style:{marginRight:10,cursor:"pointer"}},"\u7f16\u8f91"),"|",u.a.createElement("span",{onClick:function(){a.initcode(t)},style:{marginRight:10,marginLeft:10,cursor:"pointer"}},"\u521d\u59cb\u5316\u5bc6\u7801"),"|",u.a.createElement("span",{onClick:function(){a.deleteUser(t)},style:{marginLeft:10,cursor:"pointer"}},"\u5220\u9664"))}}],data:[],pagination:{current:1,pageSize:10,total:null},editShow:!1,rowInfo:""},a.handleTableChange=a.handleTableChange.bind(Object(s.a)(Object(s.a)(a))),a.getData=a.getData.bind(Object(s.a)(Object(s.a)(a))),a.initcode=a.initcode.bind(Object(s.a)(Object(s.a)(a))),a.deleteUser=a.deleteUser.bind(Object(s.a)(Object(s.a)(a))),a.showEdit=a.showEdit.bind(Object(s.a)(Object(s.a)(a))),a.hideEdit=a.hideEdit.bind(Object(s.a)(Object(s.a)(a))),a.reloadTable=a.reloadTable.bind(Object(s.a)(Object(s.a)(a))),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"handleTableChange",value:function(e){var t=this,a=e.current,n=e.pageSize,i=e.total;this.setState(function(){return{pagination:{current:a,pageSize:n,total:i}}},function(){t.getData()})}},{key:"reloadTable",value:function(){var e={current:this.state.pagination.current,pageSize:this.state.pagination.pageSize,total:this.state.pagination.total};this.handleTableChange(e)}},{key:"getData",value:function(){var e={page:1,pageSize:10,totalPage:3,total:23,rows:[{password:"0c8a80688b671e290381acb56b1bd4e9",username:"admin",authorities:[],accountNonExpired:!0,accountNonLocked:!0,credentialsNonExpired:!0,enabled:!0,id:1,userId:null,accountCode:"11111111",name:"Administrator",sex:1,roles:"\u8d85\u7ea7\u7ba1\u7406\u5458",menus:null},{password:"0c8a80688b671e290381acb56b1bd4e9",username:"liujie",authorities:[],accountNonExpired:!0,accountNonLocked:!0,credentialsNonExpired:!0,enabled:!0,id:30,userId:null,accountCode:"111",name:"\u5218\u6770",sex:2,roles:"\u7ba1\u7406\u54584",menus:null}]};if(!0&&e&&e.rows.length>0){var t=e.rows;t.forEach(function(e,t){e.key=e.id,e.sortIndex=t-0+1}),this.setState({data:t,pagination:{current:e.page,pageSize:e.pageSize,total:e.total}})}else this.setState({data:[],pagination:{current:1,pageSize:10,total:null}})}},{key:"showEdit",value:function(e){this.setState({editShow:!0,rowInfo:e})}},{key:"hideEdit",value:function(){this.setState({editShow:!1})}},{key:"initcode",value:function(e){b.a.success("\u521d\u59cb\u5316\u5bc6\u7801\u6210\u529f\uff0c \u521d\u59cb\u5bc6\u7801\uff1a !23qaz")}},{key:"deleteUser",value:function(e){}},{key:"componentWillReceiveProps",value:function(e){var t=this;e!==this.props&&this.setState(function(){return{data:[],pagination:{current:1,pageSize:10,total:null}}},function(){t.getData()})}},{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state}},{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(w.a,{columns:this.state.columns,dataSource:this.state.data,pagination:this.state.pagination,onChange:this.handleTableChange,bordered:!0,style:{marginTop:20}}),this.state.editShow?u.a.createElement(E,{title:"\u7f16\u8f91\u7528\u6237",rowInfo:this.state.rowInfo,hideModal:this.hideEdit,onOk:this.reloadTable}):null)}}]),t}(u.a.Component),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).state={sourceCode:"pc",username:"",name:"",accountCode:"",roleId:""},a.changeFilter=a.changeFilter.bind(Object(s.a)(Object(s.a)(a))),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"changeFilter",value:function(e){this.setState({username:e.username,name:e.name,accountCode:e.accountCode,roleId:e.roleId})}},{key:"render",value:function(){return u.a.createElement(n.a,{style:{margin:"15px 20px"},title:"\u8d26\u6237\u7ba1\u7406"},u.a.createElement(k,{changeFilter:this.changeFilter}),u.a.createElement(S,{sourceCode:this.state.sourceCode,username:this.state.username,name:this.state.name,accountCode:this.state.accountCode,roleId:this.state.roleId}))}}]),t}(u.a.Component);t.default=I}}]);
//# sourceMappingURL=20.38a21aab.chunk.js.map